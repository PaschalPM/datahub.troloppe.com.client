<div class="my-4">
    <div #dropdownContainer class="relative" appClickOutside (clickOutside)="isDropdownOpen=false">
        <label [for]="name" class="text-base lg:text-lg" (click)="toggleDropdown()">
            {{ label }}
            <span class="font-bold" *ngIf="isRequired"> *</span>
        </label>
        <div tabindex="0" [id]="name" [class]="utils.cn('flex  mt-2 justify-between items-center p-2 py-3 border outline-none border-gray-400 rounded cursor-pointer focus:border-none focus:ring-1 focus:ring-dodger-blue focus:dark:ring-orange-400', {'border-none ring-1 ring-dodger-blue dark:ring-orange-400': isDropdownOpen}, errorBorder)"
            (click)="toggleDropdown()">
            <!-- <span class="opacity-50 dark:opacity-25" *ngIf="!selectedOption"> {{ placeholder }} </span> -->
            <span class="opacity"> {{ selectedOption?.label }} </span>
            <span class="ml-2 transform transition-transform duration-300 ease-in-out"
                [class.rotate-180]="isDropdownOpen">â–¼</span>
        </div>
        <div *ngIf="isDropdownOpen" [style]="dropdownMaxHeight"
            class="z-30 flex flex-col absolute w-full bg-lighter-blue border-2 border-gray-700/50 dark:border-gray-100/75 dark:bg-gray-800 rounded mt-1 overflow-y-auto"
            [class.bottom-7]="openUp">

            <div class="my-2 sticky flex items-center top-0 px-2 bg-lighter-blue dark:bg-gray-800" *ngIf="isSearchable">
                <my-mat-icon class="text-gray-800/50 dark:text-white/50"> search </my-mat-icon>
                <input type="text" [(ngModel)]="qString"
                    class="bg-transparent border-0 focus:ring-0 w-full block mx-auto" placeholder="Search...">
            </div>
            <ul *ngIf="filteredOptions.length">
                <li *ngFor="let option of filteredOptions" (click)="selectOption(option)"
                    [class]="utils.cn('p-2 hover:bg-gray-200 dark:hover:bg-gray-500  cursor-pointer', {'bg-gray-300 dark:bg-gray-600': selectedOption?.value === option.value})">
                    {{ option.label }}
                </li>
            </ul>
            <div *ngIf="!filteredOptions.length && true" class="p-2 text-center w-full py-4">
                No results found...
            </div>
        </div>
    </div>
    <div [class]="
        utils.cn(
            '!-mt-1  transform rounded text-sm text-red-500 opacity-100 transition-all duration-150 ease-in-out dark:text-red-400',
          { '!mt-1 opacity-100': formIsSubmitting && control.invalid }
        )
      ">
        <div *ngIf="control.errors?.['required'] && formIsSubmitting">
            {{ name | capitalize: true }} is a required field.
        </div>
    </div>
</div>